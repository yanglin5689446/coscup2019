<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>老司機帶你讀 redux 原始碼</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/reveal.min.css" integrity="sha256-OxiHrn+gXudPDHxTvXiQzeFjZU/FllSSPmOOYAZ1O/g=" crossorigin="anonymous" />    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/league.min.css" integrity="sha256-Alkh+MTa+O0kGOwB3aVd9pTxNB4itQ3QK1fqVuAvAYY=" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>

    <style>
      code { font-size: 1rem; }
      .reveal .progress span {
        background-color: #2979ff;
      }
      .text-left { text-align: left; }
      .text-right { text-align: right; }
      .text-center { text-align: center; }
      .code-container {
        transform-origin: 50%;
        transform: scale(1.25);
      }
      code {
        font-size: .75em;

        line-height: 1.2em;
      }
      ul > ul > li{
        font-size: 1.8rem !important;
      }
    </style>
  </head>
  <body>

    <div class="reveal">
      <div class="slides">
        <section>
          <img src="./qrcode.png" alt="">
          <h2>老司機帶你讀 redux 原始碼</h2>
          <div>by 林子暘</div>
        </section>
        <section>自我介紹</section>
        <section>
          <h3>大綱</h3>
          <div class="text-left">
            <ul>
              <li>什麼是 redux?</li>
              <ul>
                <li>元件與架構</li>
                <li>範例程式碼</li>
                <li>設計概念</li>
              </ul>
              <li>redux 原始碼概覽</li>
              <ul>
                <li>讀原始碼時的切入點</li>
                <li>JavaScript 實用技巧</li>
              </ul>
            </ul>
          </div>
        </section>
        <section>️⚠️ 免責聲明 ⚠️</section>
        <section>
          <section>所以什麼是 redux?</section>
          <section>
            <img src='https://imgur.com/grw7odu.png'/>
          </section>
          <section data-transition='slide-in none-out'>
            <div>架構圖</div>
            <img src='./images/redux-arch.png'/>
          </section>
          <section data-transition='none-in none-out'>
            <div>從 store 取回資料</div>
            <img src='./images/redux-arch-1.png'/>
          </section>
          <section data-transition='none-in slide-out'>
            <div>更新 store 的資料</div>
            <img src='./images/redux-arch-2.png'/>
          </section>
          <section>
            <blockquote>
              <label>App</label>
              透過
              <label>dispatch</label>
              <label>action</label>
              呼叫
              <label>reducer</label> 更新
              <label>store</label>
              中的
              <label>state</label>
            </blockquote>
          </section>
          <section>
            redux example code
          </section>
        </section>
        <section>
          <div>原始碼</div>
          <img src="https://imgur.com/vzs9XL9.png" alt="">
          <a href="https://github.com/reduxjs/redux/tree/master/src">
            https://github.com/reduxjs/redux/tree/master/src
          </a>
        </section>
        <section>
          <section class="code-container" data-transition="slide-in none-out">
            index.js
            <pre><code
              id='src-index'
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/index.js'
            >
            </code></pre>
            <p class="fragment" data-code='src-index' data-line-numbers='9-27'></p>
            <p class="fragment" data-code='src-index' data-line-numbers='1-7,29-36'></p>
          </section>
        </section>
        <section >
          <section>
            utils
            <img src="https://imgur.com/EEfp3zS.png" alt="">
          </section>
          <section class="code-container">
            actionTypes.js
            <pre><code
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/utils/actionTypes.js'
            >
            </code></pre>
          </section>
          <section class="code-container">
            isPlainObject.js
            <pre><code
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/utils/isPlainObject.js'
            >
            </code></pre>
          </section>
        </section>
        <section>
          <section class="code-container">
            compose.js
            <pre><code
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/compose.js'
            >
            </code></pre>
          </section>
        </section>
        <section>
          <section class="code-container">
            createStore.js
            <pre><code
              id='createStore'
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/createStore.js'
            >
            </code></pre>
            <p class="fragment" data-code='createStore' data-line-numbers='31-64,281-292'></p>
            <p class="fragment" data-code='createStore' data-line-numbers='66-77'></p>
            <p class="fragment" data-code='createStore' data-line-numbers='79-94'></p>
            <p class="fragment" data-code='createStore' data-line-numbers='96-156'></p>
            <p class="fragment" data-code='createStore' data-line-numbers='158-216'></p>
            <p class="fragment" data-code='createStore' data-line-numbers='218-240'></p>
            <p class="fragment" data-code='createStore' data-line-numbers='242-279'></p>
          </section>
        </section>
        <section>
          <section class="code-container">
            applyMiddleware.js
            <pre><code
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/applyMiddleware.js'
            >
            </code></pre>
          </section>
        </section>
        <section>
          <section class="code-container">
            combineReducers.js
            <pre><code
              id='combineReducers'
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/combineReducers.js'
            >
            </code></pre>
            <p class="fragment" data-code='combineReducers' data-line-numbers='115-180'></p>
            <p class="fragment" data-code='combineReducers' data-line-numbers='5-15'></p>
            <p class="fragment" data-code='combineReducers' data-line-numbers='17-63'></p>
            <p class="fragment" data-code='combineReducers' data-line-numbers='65-97'></p>

          </section>
        </section>
        <section>
          <section class="code-container">
            bindActionCreators.js
            <pre><code
              data-trim
              data-line-numbers
              data-url='https://raw.githubusercontent.com/reduxjs/redux/master/src/bindActionCreators.js'
            >
            </code></pre>
          </section>
        </section>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/js/reveal.min.js" integrity="sha256-pv4AarTAzSO6lz+bbMPwmV29XMjkzmFOn601b2pWqXE=" crossorigin="anonymous"></script>
    <script>
      (function setup () {
        const codeElements = Array.from(document.querySelectorAll('code'))
        // load all code
        Promise.all(codeElements.map(element => {
          const url = element.getAttribute('data-url')
          const line = {
            from: element.getAttribute('data-line-from'),
            to: element.getAttribute('data-line-to'),
          }

          return fetch(url)
            .then(response => response.text())
            .then(code => {
              if(line.from || line.to){
                line.from = line.from && line.from - 1
                line.to = line.to && line.to - 1
                code = code.split("\n").slice(line.from, line.to).join('\n')
              }
              element.innerHTML = code
            })
        }))
        .then(() => {
          Reveal.initialize({
            history: true,
            pdfSeparateFragments: true,
            allottedTime: 30 * 60 * 1000, // 30 minutes
            defaultTiming: 18, // seconds per slide
            // - (optional) height of page/time progress bar
            progressBarHeight: 10,
            pausedBarColor: '#448aff',
            fragmentInURL: true,
            // - (optional) bar color
            dependencies: [
              { src: 'plugin/elapsed-time-bar/elapsed-time-bar.js'},
              { src: 'plugin/highlight/highlight.js', async: true },
            ]
          });

          Reveal.addEventListener('fragmentshown', ({ fragment }) => {
            const code = fragment.getAttribute('data-code')
            const lineNumbers = fragment.getAttribute('data-line-numbers')
            if(code){
              const codeElement = document.getElementById(code)
              if(codeElement && lineNumbers){
                codeElement.setAttribute('data-line-numbers', lineNumbers)
                // reset highlight
                Array.from(codeElement.querySelectorAll('table tr'))
                  .forEach(element => element.classList.remove('highlight-line'))
                RevealHighlight.highlightLines(codeElement, lineNumbers)
              }
            }
          })
        })

      })()
    </script>
  </body>
</html>